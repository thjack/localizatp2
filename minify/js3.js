/**************************************
 * Copyright (c) 2016 Jose Venegas
 * Soporte contacte a:
 * jvenegasperu@gmail.com Facebook & Skype: jvenegasperu
 **************************************/
var app={initialize: function(){this.bindEvents();},bindEvents: function(){document.addEventListener('deviceready',this.onDeviceReady,false);},onDeviceReady: function(){pictureSource=navigator.camera.PictureSourceType;destinationType=navigator.camera.DestinationType;function disp(pos){longitud=pos.coords.longitude;latitud=pos.coords.latitude;}$('#btn-foto').click(function(){navigator.geolocation.getCurrentPosition(disp);});}};window.onload=function(){document.getElementById("foto").style.width=(window.innerWidth-50)+"px";document.getElementById("foto").style.height=(window.innerWidth-50)+"px";};function capturePhoto(){navigator.camera.getPicture(onSuccess,onFail,{quality: 90,destinationType: Camera.DestinationType.DATA_URL,correctOrientation: true,targetWidth: 1000,targetHeight: 1000});};function getPhoto(source){navigator.camera.getPicture(onPhotoURISuccess,onFail,{quality: 90,destinationType: destinationType.FILE_URI,sourceType: source});};function onSuccess(imageData){document.getElementById("foto").style.backgroundImage="url('data:image/jpeg;base64,"+imageData+"')";document.getElementById("foto").style.backgroundSize="100% 100%";URIimg="data:image/jpeg;base64,'"+imageData+"'";};function onPhotoURISuccess(imageURI){document.getElementById("foto").style.backgroundImage="url('"+imageURI+"')";document.getElementById("foto").style.backgroundSize="100% 100%";URIimg=String(imageURI);};var hoy="";var ruta="";var nombreArchivo="";var descripcion="";function enviarFoto(URIimg){enviarPosicion();nombreArchivo=prompt("Ingrese un nombre a la imagen","");while(nombreArchivo==""){nombreArchivo=prompt("Ingrese un nombre a la imagen","");};descripcion=prompt("Ingrese úna descripción,ubicación o referencia","");while(descripcion==""){descripcion=prompt("Ingrese úna descripción,ubicación o referencia","");};if(nombreArchivo==""||descripcion==""){swal("","Debe rellenar los campos que se piden para poder efectuar su operación.");}else{var opciones=new FileUploadOptions();opciones.fileKey="file";opciones.fileName=nombreArchivo;opciones.mimeType="image/jpeg";var parametros=new Object();parametros.value1="test";parametros.value2="param";opciones.parametros=parametros;opciones.chunkedMode=false;var ft=new FileTransfer();ft.upload(URIimg,'http:/'+'/'+"land.sedalib.com.pe:81/fotos/upload.php",win,fail,opciones);hoy=new Date();var dd=hoy.getDate();var mm=hoy.getMonth()+1;var yyyy=hoy.getFullYear();if(dd<10){dd='0'+dd};if(mm<10){mm='0'+mm};hoy=mm+'-'+dd+'-'+yyyy;ruta='http:/'+'/'+"land.sedalib.com.pe:81/fotos/imagenes/"+hoy+"/"+nombreArchivo+".jpg";}};function enviarPosicion(){$.ajax({type: "POST",url: conexion+"upload.php",data: "longitud="+longitud+"&latitud="+latitud,cache: false,dataType: "text",success: onSuccess7});};function onSuccess7(data){swal({title:data,timer: 3000,showConfirmButton: false});regresar();};function win(r){console.log("code="+r.responseCode);console.log("response="+r.response);console.log("Sent="+r.bytesSent);alert(r.response);};function fail(error){swal("","Error al envio de Foto");};function onFail(message){swal("","Error encontrado en la camara");};function l4(){location.href="index.html";}
